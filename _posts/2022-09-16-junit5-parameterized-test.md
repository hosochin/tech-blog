---
layout: post
title: ã€Junit5ã€‘ParameterizedTestã‚’ä½¿ã£ã¦ã¿ã‚‹
date: 2022-09-16
tags: [Java, Junit5, ãƒ†ã‚¹ãƒˆ]
---

# ã¯ã˜ã‚ã«

ãŠä¸–è©±ã«ãªã‚Šã¾ã™ã€hosochinã§ã™  
ä»Šå›ã¯Junit5ã®ParameterizedTestã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™  
ã“ã„ã¤ã¯Junit5ã‹ã‚‰ä½¿ãˆã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã€ç”¨æ„ã•ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®åˆ†ã ã‘ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã‚Œã‚‹ä¾¿åˆ©æ©Ÿèƒ½ã§ã™  
ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ãŒã ã„ã¶ã‚¹ãƒƒã‚­ãƒªã‹ã‘ãã†ã§ã™  
è©³ç´°ã«ã¤ã„ã¦ã¯[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests)ã‚’å‚ç…§ã—ã¦ãã ã•ã„

# ç›®æ¬¡

- [ã‚·ãƒ³ãƒ—ãƒ«ãªParameterizedTest](#ã‚·ãƒ³ãƒ—ãƒ«ãªparameterizedtest)
  - [ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰](#ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰)
  - [èª¬æ˜](#èª¬æ˜)
- [ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«nullã‚„ç©ºæ–‡å­—åˆ—ã‚’å«ã‚ã‚‹å ´åˆ](#ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«nullã‚„ç©ºæ–‡å­—åˆ—ã‚’å«ã‚ã‚‹å ´åˆ)
  - [ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰](#ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰-1)
- [2ã¤ä»¥ä¸Šã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒ†ã‚¹ãƒˆã—ãŸã„å ´åˆ](#2ã¤ä»¥ä¸Šã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒ†ã‚¹ãƒˆã—ãŸã„å ´åˆ)

# ã‚·ãƒ³ãƒ—ãƒ«ãªParameterizedTest

## ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰

```java
// ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰
@ParameterizedTest
@ValueSource(ints = {0, 1})
void test(int num) {
    assertTrue(checkNum(num));
}

// ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®ãƒ¡ã‚½ãƒƒãƒ‰
public boolean checkNum(Integer num) {
    if (num == null || num == 0 || num == 1) {
        return true;
    }
    return false;
}
```

## èª¬æ˜

ParameterizedTestã‚’ä½¿ã†ã«ã¯ãŠãªã˜ã¿Testã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ä»£ã‚ã‚Šã«ParameterizedTestã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ä¸ã—ã¦ã‚ã’ã¾ã™  
æ¬¡ã«ValueSourceã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã—ã¾ã™  
ä»Šå›ã¯0ã¨1ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç”¨æ„ã—ã¦ã€checkNumãƒ¡ã‚½ãƒƒãƒ‰ã®çµæœãŒtrueã«ãªã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãƒ†ã‚¹ãƒˆã¨ãªã£ã¦ã„ã¾ã™  
ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã¯0, 1ã®é †ç•ªã§åˆè¨ˆ2å›å®Ÿè¡Œã•ã‚Œã¾ã™ğŸ‘  
ã¾ãŸã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å‹ã¯ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã§ç”¨æ„ã•ã‚Œã¦ãã†ã§ã™  
æŒ‡å®šã§ãã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ç¨®é¡ã«ã¤ã„ã¦ã¯[ã“ã¡ã‚‰](https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests-sources-ValueSource)ã‚’å‚ç…§

# ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«nullã‚„ç©ºæ–‡å­—åˆ—ã‚’å«ã‚ã‚‹å ´åˆ

ã‚·ãƒ³ãƒ—ãƒ«ãªParameterizedTestã«è¼‰ã›ãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã ã¨nullã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒç¶²ç¾…ã§ãã¦ã„ã¾ã›ã‚“  
nullã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å«ã‚ã‚‹å ´åˆã¯NullSourceã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ä¸ã™ã‚‹ã ã‘ã§ã™ï¼ˆãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã¯Integerã«ã—ã¦ã‚ã’ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰  
ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã¯0, 1, nullã®é †ç•ªã§ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã¾ã™

## ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰

```java
// ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰
@ParameterizedTest
@ValueSource(ints = {0, 1})
@NullSource
void test(Integer num) {
    assertTrue(checkNum(num));
}
```

ã¡ãªã¿ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒStringã®å ´åˆã¯EmptySourceã§ç©ºæ–‡å­—åˆ—ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€NullAndEmptySourceã§nullã¨ç©ºæ–‡å­—åˆ—ã®ä¸¡æ–¹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®Ÿè¡Œã—ã¦ãã‚Œã¾ã™

```java
// ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰
@ParameterizedTest
@NullSource // nullã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å®Ÿè¡Œ
@EmptySource // ç©ºæ–‡å­—åˆ—ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å®Ÿè¡Œ
@NullAndEmptySource // nullã¨ç©ºæ–‡å­—åˆ—ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å®Ÿè¡Œ
void test(String str) {
    assertTrue(checkStr(str));
}
```

# 2ã¤ä»¥ä¸Šã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒ†ã‚¹ãƒˆã—ãŸã„å ´åˆ

ValueSourceã ã¨ã€1åº¦ã«è¤‡æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã¾ã›ã‚“  
è¤‡æ•°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€ã“ã¡ã‚‰ã®è¨˜äº‹ã«ã¾ã¨ã‚ã¦ã„ã¾ã™ğŸ‘

> [ã€Junit5ã€‘ã€ParameterizedTestã€‘ 2ã¤ä»¥ä¸Šã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒ†ã‚¹ãƒˆã—ãŸã„å ´åˆ]({{ '/junit5-parameterized-test-multiple-parameters' | relative_url }})
