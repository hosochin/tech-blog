---
layout: post
title: 【ネスペ対策】【MPLS】MPLSの概要について理解する
date: 2023-03-26
tags: [network, mpls, ip-vpn, label-switching, network-specialist, ipa, routing]
---

# はじめに

お世話になります、hosochinです  
今回はIPAのネットワークスペシャリスト対策ってことでMPLSについて整理してみたいと思います

# 目次

- [MPLSとは](#mplsとは)
- [MPLSの流れ](#mplsの流れ)
- [MPLSのメリット](#mplsのメリット)
  - [転送処理の高速化](#転送処理の高速化)
  - [通信品質の制御や帯域保証](#通信品質の制御や帯域保証)

# MPLSとは

**MPLS = Multi-Protocol Label Switching** はRFC3031で規定されている方式で、 **ラベル** と呼ばれるタグを使用したパケット転送技術です  
主に **IP-VPN** で用いられる技術となります

# MPLSの流れ

例として、本社と支社間をIP-VPNで繋いでいるとします  
IP-VPNでは、パケット転送技術として **MPLS** が使用されています  
この場合のルーティングの流れは以下のイメージです

<img src="{{ '/assets/images/2023-03-26_1.png' | relative_url }}" alt="MPLS転送フロー" class="img-large">

上図からもIP-VPN内では、ラベルを付けたり付け替えたりでリレーしていることが分かりますね  
試験で問われそうなポイントとしては、 **ラベルを貼るのも剥がすのもLER** であるという点です  

**MPLSの構成要素:**
- **LER (Label Edge Router)**: ラベルの付加・除去を行う
- **LSR (Label Switch Router)**: ラベルに基づいてパケット転送を行う

ちなみに過去問では以下のような設問がありました

> 事業者閉域IP網内の利用者トラフィック中継処理において、タグ情報を利用する目的を25字以内で述べよ
> 
> ネットワークスペシャリスト/平成30年度/午後1/問3

答えは **「利用者ごとのトラフィックを区別するため」** でした  
あくまでもタグ情報（ラベル）は事業者閉域IP網内（IP-VPN）で完結しています  
事業者側が使用するものであり、利用者側は関係ありません

# MPLSのメリット

MPLSのメリットとしては以下の2点が挙げられます

**・転送処理の高速化**  
**・通信品質の制御や帯域保証**

## 転送処理の高速化

従来のIPルーティングでは、IPアドレスに基づいてパケットの転送をしますが、MPLSではIPパケットに付与された **ラベル** という値に基づいて転送します  
IPルーティングの場合、ネットワークが大きくなればその分ルータの計算量も増えます  
その場合ルータは膨大なルーティングテーブルからロンゲストマッチで経路を選ぶため処理が重くなりますが、ラベルスイッチングの場合はラベルが固定長（20bit）のため単純な計算でルーティングできます

**処理比較:**
- **従来のIPルーティング**: IPアドレスによるロンゲストマッチ（処理が重い）
- **MPLSラベルスイッチング**: 固定長ラベル（20bit）による高速転送

## 通信品質の制御や帯域保証

ラベルを利用して仮想的なパスを貼ることで、ベストエフォートサービスと呼ばれるIPネットワークであっても、通信品質の制御や帯域保証を提供できます

**QoS機能:**
- トラフィックエンジニアリング
- 帯域保証
- 優先制御

# まとめ

MPLSは、ラベルを使用したパケット転送技術により、従来のIPルーティングに比べて高速化と品質制御を実現します。IP-VPN環境において、事業者がLERとLSRを使用してラベルベースの転送を行い、利用者ごとのトラフィック分離と品質保証を提供する重要な技術です。ネットワークスペシャリスト試験では、MPLSの動作原理と構成要素の役割が頻出ポイントです。
